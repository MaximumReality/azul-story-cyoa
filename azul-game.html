<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Azul & Mochkil CYOA</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

body {
  font-family:'Press Start 2P', cursive;
  background: #0a0a0a;
  color:#f0f0f0;
  padding:1rem;
  margin:0;
  font-size: 0.6rem;
}

h1 { color:#39ff14; text-shadow:0 0 10px #39ff14; text-align:center; font-size: 1rem; }
#chatContainer { max-width:600px; margin:0 auto; display:flex; flex-direction:column; gap:0.8rem; }

input[type="text"] {
  font-family:monospace; font-size:16px; padding:0.8rem;
  border-radius:5px; border:1px solid #333; width:100%;
  box-sizing:border-box; background: #111; color: #39ff14;
}

.button-row { display: flex; gap: 10px; }
button {
  flex: 1; font-family: 'Press Start 2P'; font-size: 0.5rem;
  padding: 0.8rem; background:#222; color:#39ff14;
  border:2px solid #39ff14; border-radius:5px;
}

.response {
  padding:1rem; border-radius:10px; background:#111;
  border: 1px solid #39ff14; margin-top: 1rem;
  animation:fadeIn 0.4s; line-height: 1.6;
}

video { width: 100%; margin-top:1rem; border:2px solid #ff00ff; border-radius:10px; }
@keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
</style>
</head>
<body>

<h1>Azul & Mochkil CYOA üê±üêà‚Äç‚¨õ</h1>

<div id="chatContainer">
  <input type="text" id="playerName" placeholder="Enter name...">
  <input type="text" id="promptInput" placeholder="Type 'Taco', 'Space', or 'Pirate'...">
  <div class="button-row">
    <button onclick="addResponse()">SEND</button>
    <button onclick="randomPrompt()">üé≤ RANDOM</button>
  </div>
</div>

<div id="responses"></div>
<div id="videosContainer"></div>

<script>
const stories = {
  taco: {
    triggers: ["taco", "üåÆ"],
    video: "azul_mochkil_taco_truck.mp4",
    questions: [
      { q: "You're hungry. Do you look for food?", a: ["Yes", "No (Game Over)"], correct: 0 },
      { q: "You see a truck. Is it a Taco Truck?", a: ["Hopefully!", "Probably a scam"], correct: 0 },
      { q: "Mochkil wants 50 tacos. Allow it?", a: ["Yes", "Only 2"], correct: 0 },
      { q: "Azul is hacking the menu. Help him?", a: ["Type fast", "Just watch"], correct: 0 },
      { q: "The sauce is glowing green. Eat it?", a: ["Risk it!", "No way"], correct: 0 },
      { q: "A scammer tries to take the truck!", a: ["Call Azul", "Fight him"], correct: 0 },
      { q: "The tacos are ready. Where to eat?", a: ["On a roof", "In the truck"], correct: 0 },
      { q: "Final choice: Share with the cats?", a: ["Always", "Never (Game Over)"], correct: 0 }
    ]
  },
  pirate: {
    triggers: ["pirate", "üè¥‚Äç‚ò†Ô∏è"],
    video: "azul_mochkil_pirates.mp4",
    questions: [
      { q: "A ghost ship appears! Board it?", a: ["Jump aboard", "Swim away"], correct: 0 },
      { q: "The Captain is a cat. Salute him?", a: ["Aye Aye!", "Meow"], correct: 0 },
      { q: "We need a navigator. Pick one:", a: ["Azul", "Mochkil"], correct: 0 },
      { q: "The compass points to...", a: ["Gold", "Tacos"], correct: 1 },
      { q: "A kraken attacks! What's the weapon?", a: ["Laser pointer", "Fish breath"], correct: 0 },
      { q: "The treasure chest is locked!", a: ["Hack it", "Smash it"], correct: 0 },
      { q: "Mochkil found the rum (it's milk).", a: ["Let him drink", "Save it"], correct: 0 },
      { q: "Final: Do you claim the crown?", a: ["Yes!", "Give it to Azul"], correct: 1 }
    ]
  },
  space: {
    triggers: ["space", "üöÄ"],
    video: "azul_mochkil_space_voyager.mp4",
    questions: [
      { q: "Oxygen is low. What's the plan?", a: ["Fix tank", "Panic"], correct: 0 },
      { q: "An alien planet looks like a cat?", a: ["Land there", "Fly past"], correct: 0 },
      { q: "Zero gravity snacks! Catch them?", a: ["Yes", "Too lazy"], correct: 0 },
      { q: "Azul found a wormhole.", a: ["Enter it", "Reverse!"], correct: 0 },
      { q: "The aliens speak in purrs.", a: ["Purr back", "Use translator"], correct: 1 },
      { q: "The ship's AI is glitching!", a: ["Reboot", "Call for help"], correct: 0 },
      { q: "You see the edge of reality.", a: ["Look closer", "Close eyes"], correct: 0 },
      { q: "Final: Are you a Space Voyager?", a: ["Yes", "I'm a cat"], correct: 0 }
    ]
  },
  gameover: { video: "azul_mochkil_gameover.mp4" }
};

let currentStory = null;
let qIndex = 0;

function addResponse() {
  const input = document.getElementById('promptInput');
  const text = input.value.toLowerCase();
  if(!text) return;

  // Check for story start
  for(let key in stories) {
    if(stories[key].triggers && stories[key].triggers.some(t => text.includes(t))) {
      startCYOA(key);
      input.value = "";
      return;
    }
  }
  
  // Default banter if no story starts
  const div = document.createElement('div');
  div.className = 'response';
  div.innerHTML = "<strong>Azul:</strong> Boring... type a real adventure keyword!";
  document.getElementById('responses').prepend(div);
  input.value = "";
}

function startCYOA(key) {
  currentStory = key;
  qIndex = 0;
  document.getElementById('responses').innerHTML = ""; // Clear for story
  showQuestion();
}

function showQuestion() {
  const s = stories[currentStory];
  const q = s.questions[qIndex];
  
  const div = document.createElement('div');
  div.className = 'response';
  div.innerHTML = `<strong>STEP ${qIndex+1}/8:</strong><br>${q.q}<br><br>`;
  
  q.a.forEach((ans, i) => {
    const btn = document.createElement('button');
    btn.textContent = ans;
    btn.style.margin = "5px";
    btn.onclick = () => {
      if(i === q.correct) {
        qIndex++;
        if(qIndex < s.questions.length) {
          div.remove();
          showQuestion();
        } else {
          div.innerHTML = "<strong>ADVENTURE UNLOCKED!</strong>";
          playVideo(s.video);
        }
      } else {
        div.innerHTML = "<strong>WRONG CHOICE!</strong>";
        playVideo(stories.gameover.video);
      }
    };
    div.appendChild(btn);
  });
  document.getElementById('responses').prepend(div);
}

function playVideo(src) {
  const v = document.createElement('video');
  v.src = src;
  v.controls = true;
  v.setAttribute('playsinline', '');
  document.getElementById('videosContainer').prepend(v);
  v.play();
}

function randomPrompt() {
  const r = ["Taco", "Space", "Pirate"];
  document.getElementById('promptInput').value = r[Math.floor(Math.random()*r.length)];
}
</script>
</body>
</html>
